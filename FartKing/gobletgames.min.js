var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])};return function(i,e){t(i,e);function s(){this.constructor=i}i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}();!function(t){var i=function(i){__extends(e,i);function e(e,s,a){void 0===e&&(e=800),void 0===s&&(s=600),void 0===a&&(a="gobletgames");var n=i.call(this,{enableDebug:!1,width:e,height:s,renderer:Phaser.AUTO,parent:a,transparent:!1,antialias:!0,preserveDrawingBuffer:!1,physicsConfig:null,state:null,forceSetTimeOut:!1})||this;return n.state.add("Boot",t.Boot,!1),n.state.add("Preload",t.Preload,!1),n.state.add("Game",t.Game,!1),n.state.start("Boot"),n}return e}(Phaser.Game);t.FartKing=i}(FartKing||(FartKing={}));function StartFartKing(){new FartKing.FartKing}!function(t){var i=function(){function t(t){this._game=t,this._bucketImage=this._game.add.image(0,0,"bucket"),this._bucketImage.anchor.set(.5,.5),this._bucketImage.fixedToCamera=!0,this._bucketImage.cameraOffset.set(this._bucketImage.width/2,.3*this._game.camera.height),this._tween=this._game.add.tween(this._bucketImage.cameraOffset),this._tween.to({x:this._game.camera.width-this._bucketImage.width/2},6e3,Phaser.Easing.Sinusoidal.InOut,!1,0,-1,!0),this._tween.start(0)}return Object.defineProperty(t.prototype,"bucketImage",{get:function(){return this._bucketImage},enumerable:!0,configurable:!0}),t}();t.Bucket=i}(FartKing||(FartKing={}));!function(t){var i=function(){function t(t){var i=this;this._game=t,this.onDown=new Phaser.Signal,this._buttImage=this._game.add.image(0,0,"butt"),this._buttImage.anchor.set(.5,1),this._game.input.onDown.add(function(){i.onDown.dispatch()},this),this.position()}return t.prototype.position=function(){this._buttImage.position.set(this._game.width/2,this._game.height-50)},t}();t.Butt=i}(FartKing||(FartKing={}));!function(t){var i=function(){function t(t){var i=this;this.onDown=new Phaser.Signal,this._game=t,this._button=this._game.add.button(0,0,"button"),this._button.position.set(this._game.width/2,this._game.height/2),this._button.input.priorityID=1,this._button.anchor.set(.5,.5),this._button.scale.set(200/this._button.width,200/this._button.height),this._button.events.onInputDown.add(function(){i.onDown.dispatch()},this)}return t.prototype.position=function(){this._button.position.set(this._game.width/2,this._game.height/2)},t.prototype.destroy=function(){this.onDown.dispose(),this._button.destroy(),this._game=null,this.onDown=null,this._button=null},t}();t.FartButton=i}(FartKing||(FartKing={}));!function(t){var i=function(){function i(i){var e=this;this._totalPlayingFarts=0,this._maxFarts=i,t.FARTAUDIOSPRITE.on("end",function(){e._totalPlayingFarts--}),t.FARTAUDIOSPRITE.play("hatdance"),t.FARTAUDIOSPRITE.loop(!0,1004)}return Object.defineProperty(i.prototype,"volume",{get:function(){return t.FARTAUDIOSPRITE.volume()},set:function(i){t.FARTAUDIOSPRITE.volume(i)},enumerable:!0,configurable:!0}),i.prototype.playFart=function(i){this._totalPlayingFarts>=this._maxFarts||(t.FARTAUDIOSPRITE.play(i),this._totalPlayingFarts++)},i.prototype.forcePlay=function(i){t.FARTAUDIOSPRITE.play(i)},i}();t.FartMachine=i}(FartKing||(FartKing={}));!function(t){var i=function(){function t(t,i,e,s,a){this._maxParticles=t,this._baseSprite=i,this._activeParticles=[],this._inactiveParticles=[],this._game=a,this._grav=e,this._angle=s,this._started=!1;for(var n=0,r=this._maxParticles;n<r;n++)this._inactiveParticles.push(this.createParticle(this._baseSprite))}return t.prototype.Stop=function(){this._started=!1},t.prototype.ContinuesFlow=function(t,i){this._startPoint=t,this._waitPeriod=i,this._waitElapsed=0,this._started=!0},t.prototype.Explosion=function(t){if(this._startPoint=t,this._inactiveParticles.length>0)for(var i=this._inactiveParticles.length-1;i>=0;i--)this.shootParticle(this._game.rnd.between(this._game.height,1.3*this._game.height))},t.prototype.createParticle=function(t){var i={i:this._game.add.image(-1e3,-1e3,t),v:new Phaser.Point,r:this._game.rnd.between(-30,30)},e=this._game.rnd.between(30,40);return i.i.scale.set(e/i.i.width,e/i.i.height),i.i.anchor.set(.5,.5),i},t.prototype.resetParticle=function(t){t.i.position.set(-1e4,0),t.v.set(0,0),this._inactiveParticles.push(t)},t.prototype.shootParticle=function(t){var i=this._inactiveParticles.pop();i.v.y=-1*this._game.height,i.v.x=360*Math.random()-180,i.v.normalize(),i.v.setMagnitude(t),i.r=this._game.rnd.between(-30,30),i.i.scale.set(1,1);var e=this._game.rnd.between(30,40);i.i.scale.set(e/i.i.width,e/i.i.height),i.i.position.set(this._startPoint.x,this._startPoint.y),this._activeParticles.push(i)},t.prototype.checkHitBucket=function(t){var i=0;if(this._activeParticles.length>0)for(var e=!1,s=this._activeParticles.length-1;s>=0;s--){var a=this._activeParticles[s];e=!1,a.v.y>0&&t.bucketImage.getBounds().contains(a.i.x,a.i.y)&&(e=!0,i++),e&&this.resetParticle(this._activeParticles.splice(s,1)[0])}return i},t.prototype.update=function(){for(var t=this._activeParticles.length-1;t>=0;t--){var i=this._activeParticles[t];i.v.x-=this._grav.x*this._game.time.physicsElapsed,i.v.y-=this._grav.y*this._game.time.physicsElapsed,i.i.position.x+=i.v.x*this._game.time.physicsElapsed,i.i.position.y+=i.v.y*this._game.time.physicsElapsed,i.i.rotation+=i.r*this._game.time.physicsElapsed,i.i.position.y>this._startPoint.y+100&&this.resetParticle(this._activeParticles.splice(t,1)[0])}this._started&&(this._waitElapsed<=0?(this._waitElapsed=this._waitPeriod,this._inactiveParticles.length>0&&this.shootParticle(this._game.height)):this._waitElapsed-=this._game.time.elapsedMS)},t}();t.Particles=i}(FartKing||(FartKing={}));!function(t){var i=function(){function t(t){this._game=t,this._baseGraphic=this._game.add.graphics(0,0),this._graphic=this._game.add.graphics(0,0),this._baseGraphic.beginFill(0),this._baseGraphic.drawRect(0,0,this._game.width,50),this._baseGraphic.endFill(),this.position()}return t.prototype.position=function(){this._baseGraphic.position.set(0,this._game.height-50),this._graphic.position.set(0,this._game.height-50)},t.prototype.draw=function(t){this._graphic.clear(),this._graphic.beginFill(16711680),this._graphic.drawRect(0,0,this._game.width*t,50),this._graphic.endFill()},t}();t.PowerBar=i}(FartKing||(FartKing={}));!function(t){var i=function(){function t(t){this._game=t,this._graphic=this._game.add.graphics(0,0),this._graphic.beginFill(0,.3),this._graphic.drawRect(0,0,this._game.width,this._game.height),this._graphic.endFill(),this._arrow=this._game.add.image(this._game.width/2,0,"arrow"),this._arrow.anchor.set(.5,1),this._arrow.scale.set(250/this._arrow.width,250/this._arrow.height),this._arrow.position.set(this._game.width/2,this._game.height-50),this._tap=this._game.add.image(this._game.width/2,.4*this._game.height,"finger"),this._tap.anchor.set(.5,.5),this._tap.scale.set(200/this._tap.width,200/this._tap.height)}return t.prototype.position=function(){this._tap.position.set(this._game.width/2,this._game.height/2),this._arrow.position.set(this._game.width/2,this._game.height-50)},t.prototype.destroy=function(){this._graphic.destroy(),this._graphic=null,this._tap.destroy(),this._arrow.destroy(),this._game=null,this._tap=null,this._arrow=null},t}();t.Tutorial=i}(FartKing||(FartKing={}));FartKing||(FartKing={});!function(t){var i;(e=i=t.ROTATION||(t.ROTATION={}))[e.PORTRAIT=0]="PORTRAIT",e[e.LANDSCAPE=1]="LANDSCAPE",e[e.BOTH=2]="BOTH";var e,s=function(){function t(i,e,s){if(t.instance)throw new Error("Error double instance of screen!");t.instance=this,this._game=i,this.onResize=new Phaser.Signal,this._rotation=e,this._force=s||!1,this._size=new Phaser.Point(0,0),this._scale=new Phaser.Point(0,0),this._currentSize=new Phaser.Point(0,0),this._previousSize=new Phaser.Point(0,0),this._game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this._game.scale.setResizeCallback(this.screenUpdated,this),this._game.scale.pageAlignVertically=!0,this._game.scale.pageAlignHorizontally=!0,this.screenUpdated()}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation===i.BOTH?this.getOrientation():this._rotation},enumerable:!0,configurable:!0}),t.prototype.screenUpdated=function(){this._currentSize.x=window.innerWidth,this._currentSize.y=window.innerHeight,Phaser.Point.equals(this._currentSize,this._previousSize)||(this._previousSize.x=window.innerWidth,this._previousSize.y=window.innerHeight,this.scaleCanvas(),this._game.scale.setGameSize(this._size.x,this._size.y),this._game.scale.setUserScale(this._scale.x,this._scale.y),this._game.scale.refresh(),this.onResize.dispatch())},t.prototype.scaleCanvas=function(){this._rotation===i.BOTH?(this.getOrientation()===i.LANDSCAPE&&this.scaleLandscape(),this.getOrientation()===i.PORTRAIT&&this.scalePortrait()):(this._rotation===i.LANDSCAPE&&this.scaleLandscape(),this._rotation===i.PORTRAIT&&this.scalePortrait())},t.prototype.scaleLandscape=function(){var t=window.innerWidth,e=window.innerHeight,s=new Phaser.Point(1920,1080),a=0,n=0,r=1,o=1,h=new Phaser.Point(800,600);this.getOrientation()===i.LANDSCAPE?(a=h.y*t/e,a=Math.min(a,h.y*s.x/s.y),n=h.y,r=t/(a=Math.ceil(a)),o=e/(n=Math.ceil(n))):(n=600,o=r=t/(a=800)),this._size.x=a,this._size.y=n,this._scale.x=r,this._scale.y=o},t.prototype.scalePortrait=function(){var t=window.innerWidth,e=window.innerHeight,s=new Phaser.Point(1920,1080),a=0,n=0,r=1,o=1,h=new Phaser.Point(600,800);s=new Phaser.Point(s.y,s.x),this.getOrientation()===i.LANDSCAPE?(a=600,r=o=e/(n=800)):(n=h.x*e/t,n=Math.min(n,h.x/(s.x/s.y)),a=h.x,r=t/(a=Math.ceil(a)),o=e/(n=Math.ceil(n))),this._size.x=a,this._size.y=n,this._scale.x=r,this._scale.y=o},t.prototype.getOrientation=function(){return window.innerWidth>window.innerHeight?i.LANDSCAPE:i.PORTRAIT},t.prototype.correctOrientation=function(){return!!this._game.device.desktop||(!!this._force||this.getOrientation()===this.rotation)},t}();t.screen=s}(FartKing||(FartKing={}));!function(t){var i=function(i){__extends(e,i);function e(){return null!==i&&i.apply(this,arguments)||this}return e.prototype.create=function(){t.screen.instance=new t.screen(this.game,t.ROTATION.PORTRAIT,!1),this.game.state.start("Preload",!0,!0)},e}(Phaser.State);t.Boot=i}(FartKing||(FartKing={}));!function(t){var i=function(i){__extends(e,i);function e(){return null!==i&&i.apply(this,arguments)||this}return e.prototype.create=function(){var i=this;ga("send","event","fartking","game start"),this._disableInput=!1,this.game.stage.backgroundColor=16121850,this._gameStarted=!1,this._gameScore=0,this._plays=0,this._mlgButtonPerPlay=0,t.screen.instance.onResize.add(this.position,this),this._fartMachine=new t.FartMachine(10),this._fartMachine.volume=.5,this._bucket=new t.Bucket(this.game),this._poopParticles=new t.Particles(100,"pooemoji",new Phaser.Point(0,-500),30,this.game),this._happyParticles=new t.Particles(100,"happy",new Phaser.Point(0,-500),30,this.game),this._butt=new t.Butt(this.game),this._butt.onDown.add(this.fartButtonDown,this),this._powerBar=new t.PowerBar(this.game),this._powerBar.draw(1),this._king=this.game.add.image(0,0,"king"),this._king.anchor.set(.5,.5),this._king.position.set(this.game.width/2,0-this._king.height/2),this._kingTween=this.game.add.tween(this._king.position),this._kingTween.to({y:this.game.height/2},2e3,Phaser.Easing.Sinusoidal.In,!1),this._kingTween.onComplete.add(function(){i._disableInput=!1}),this._scoreText=this.game.add.text(),this._scoreText.fontSize=60,this._scoreText.align="center",this._scoreText.autoRound=!0,this._scoreText.text="0",this._scoreText.fixedToCamera=!0,this._scoreText.cameraOffset.set(this.game.camera.width/2,.1*this.game.camera.height),this._scoreText.anchor.set(.5,.5),this._tutorial=new t.Tutorial(this.game)},e.prototype.fartButtonDown=function(){this._disableInput||(this._fartMachine.forcePlay(this.game.rnd.pick(["baseFart","dryFart"])),this._gameStarted?(this._power+=10,this._power>=this._maxPower&&(this._power=this._maxPower)):this.startGame())},e.prototype.startGame=function(){this._tutorial&&(this._tutorial.destroy(),this._tutorial=null,ga("send","event","fartking","first tap")),this._plays++,ga("send","event","fartking","play",null,this._plays),this._king.position.set(this.game.width/2,0-this._king.height/2),this._poopParticles.ContinuesFlow(new Phaser.Point(this.game.width/2,this.game.height),100),this._maxPower=100,this._power=100,this._powerCreep=0,this._scoreText.text="0",this._gameScore=0,this._mlgButtonPerPlay=0,this._startTime=this.game.time.totalElapsedSeconds(),this._gameStarted=!0},e.prototype.gameOver=function(){ga("send","event","fartking","score",null,this._gameScore),ga("send","event","fartking","mlgButton",null,this._mlgButtonPerPlay),ga("send","event","fartking","playSeconds",null,this.game.time.totalElapsedSeconds()-this._startTime),this._kingTween.start(0),this._gameStarted=!1,this._poopParticles.Stop(),this._happyParticles.Stop,this._disableInput=!0,this._mlgButton&&(this._mlgButton.destroy(),this._mlgButton=null)},e.prototype.position=function(){this._butt.position(),this._scoreText.cameraOffset.set(this.game.camera.width/2,100),this._powerBar.position(),this._tutorial&&this._tutorial.position(),this._mlgButton&&this._mlgButton.position()},e.prototype.spawnMLGButton=function(){var i=this;this._mlgButton||(this._mlgButtonPerPlay++,this._mlgButton=new t.FartButton(this.game),this._mlgButton.onDown.addOnce(function(){i._happyParticles.Explosion(new Phaser.Point(i.game.width/2,i.game.height)),i._fartMachine.forcePlay("mlgFart"),i._mlgButton.destroy(),i._mlgButton=null}))},e.prototype.update=function(){this._poopParticles.update(),this._happyParticles.update(),this._gameStarted&&(Math.random()<.001&&this.spawnMLGButton(),this._gameScore+=this._poopParticles.checkHitBucket(this._bucket),this._gameScore+=10*this._happyParticles.checkHitBucket(this._bucket),this._scoreText.text=this._gameScore.toString(),this._powerCreep+=.05*this.game.time.physicsElapsed,this._power-=this._powerCreep,this._powerBar.draw(this._power/this._maxPower),this._power<=0&&this.gameOver())},e}(Phaser.State);t.Game=i}(FartKing||(FartKing={}));var FartKing;!function(t){var i=function(i){__extends(e,i);function e(){return null!==i&&i.apply(this,arguments)||this}return e.prototype.init=function(){this._audioComplete=new Phaser.Signal,this._audioLoadError=new Phaser.Signal,this._audioComplete.addOnce(this.audioComplete,this),this._audioLoadError.addOnce(this.audioLoadError,this)},e.prototype.preload=function(){var i=this;this.game.load.image("butt","assets/sprites/butt.png"),this.game.load.image("pooemoji","assets/sprites/pooemoji.png"),this.game.load.image("bucket","assets/sprites/bucket.png"),this.game.load.image("happy","assets/sprites/happy.png"),this.game.load.image("button","assets/sprites/button.png"),this.game.load.image("king","assets/sprites/king.jpg"),this.game.load.image("arrow","assets/sprites/arrow.jpg"),this.game.load.image("finger","assets/sprites/finger.png"),t.FARTAUDIOSPRITE=new Howl({autoplay:!1,loop:!1,src:["assets/audio/FartSprite.ogg","assets/audio/FartSprite.m4a","assets/audio/FartSprite.mp3","assets/audio/FartSprite.ac3"],sprite:{baseFart:[0,335.98639455782313],bassFart:[2e3,3761.632653061224],deepFart:[7e3,6947.210884353741],dryFart:[15e3,313.4693877551023],hatdance:[17e3,143333.8775510204,!0],hippoFart:[162e3,9013.310657596377],persFart:[173e3,1681.224489795909],wcFart:[176e3,1010.1814058956791],mlgFart:[179e3,312.0181405895721]}}),t.FARTAUDIOSPRITE.once("load",function(){i._audioComplete.dispatch()}),t.FARTAUDIOSPRITE.once("loaderror",function(){i._audioLoadError.dispatch()})},e.prototype.audioComplete=function(){this.game.state.start("Game",!0,!1)},e.prototype.audioLoadError=function(){alert("FOCK ALLES IS KAPOT")},e.prototype.shutdown=function(){this._audioLoadError.dispose(),this._audioComplete.dispose(),this._audioComplete=null,this._audioLoadError=null},e}(Phaser.State);t.Preload=i}(FartKing||(FartKing={}));